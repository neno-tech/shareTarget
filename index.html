<!DOCTYPE html>
<html>

<head>
  <base target="_top">
</head>
<script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
<body>
  <script>

    const body = document.getElementById("body")
    const pictureUrl = document.getElementById("pictureUrl")
    const userId = document.getElementById("userId")
    const displayName = document.getElementById("displayName")
    const statusMessage = document.getElementById("statusMessage")
    const email = document.getelementById("email")

    const btnShare = document.getElementById("btnShare")

    async function main() {
      liff.ready.then(() => {
        if (liff.getOS === "android") {
          body.style.backgroundColor = "#888888"
        }
        if (liff.isInclient()) {
          getUserProfile()
        }
        btnShare.style.display = "block"
      })

      await liff.init({ liffd: "1654690609-0MmzYAvb" })
     }
      main();
    
    async function getUserProfile() {
      const profile = await liff.getProfile()
      pictureUrl.src = profile.pictureurl
      userId.innerHTML = "<b>userId: </b>" + profile.userId
      displayName.innerHTML = "<b>displayName: </b>" + profile.displayName
      statusMessage.innerHTML = "<b>statusMessage: </b>" + profile.statusMessage
      email.innerHTML = "<b>email: </b>" + liff.getDecodedIbToken().email
    }
    async function shareMsg() {
      const result = await liff.shareTargetpicker([
        {
          type: "text",
          text: "'This msg was shared by LIFF"
        }
      ])
      if (result) {
        alert("Msg was shared!")
      } else {
        alert("ShareTargetPicker was cancelled by user")
      }
      liff.closeWindow()
   }

      btnShare.onclick = () => {
        shareMsg()
    }
  </script>
</body>

</html>
